# 2020.05.20 TIL

키(Key)  

Symmetic - key  

암호화 키 = 복호화 키  
암호화 키와 복호화 키 모두 비밀유지  
n명 참가 시 n(n-1)/2개의 Key Pair 저장  
Key Size : Short  
계산이 간단하고 속도가 빠름  
키 분배가 불편함  
관리해야 할 키가 상당히 많음  
키 변화 빈도가 많음  
비밀키를 아는 자만이 암*복호화 가능  
난수 발생기, 해시함수에 사용 가능  


Public - key  

암호화 키(공개키) ≠ 복호화 키(비밀키)  
암호화 키는 공개함  
n개의 Key Pair 저장  
Key Size : Long  
계산이 복잡하고 속도가 느림  
키 분배 용이  
키 관리 부담이 적음  
키 변화 빈도가 적음  
비밀키를 몰라도 암호화 가능  
전자서명, 키 분배 등 응용 가능  

키 관리 (Key Management)  

암호시스템에서 사용되는 암호학적 ㅣ들을 안전하게 다루기 위한 키의 생성, 등록, 확인, 분배, 설치, 저장, 파생,, 보관, 취소,말소, 폐기 등과 같은 일련의 절차를 제공함  
비밀키 또는 개인키의 외부노출  
키의 불법적 변조  
유효기간이 지났거나 이미 취소된 키의 불법적인 사용  

키 분류  

세션키  
일반적으로 메시지의 비밀성과 무결성을 유지하기 위해 비밀키 암호에 사용되는 키  
매 session 마다 새롭게 설정  

키-암호화 키  
세션키 설정 또는 설정된 세션키의 저장에 사용되는 비밀키 또는 개인 키  

마스터 키  
응용분야에 따라 키-암호화 키를 보호하는 다른 유형의 키  

키관리 용어  
키 생성 : 강한 안전성을 가진 키를 안전하게 생성할 수 있는 절차  
키 등록 : 키와 사용자를 연결시키는 서비스로 키 등록기관이 제공  
키 확인서 생성 : 공개키와 사용자의 연관성을 보장하는 것이며 인증기관에 의해 제공됨  
키 분배 : 인가된 사용자들에게 키 관리 정보 객체들을 안전하게 제공해 주는 일련의 절차 제공  
키 설치 : 키를 사용하기 전에 항상 필요한 절차로서 키 관리 설비 내에서 키가 위험하지 않은 방식으로 배치함  
키 복구 : 암호문을 해독할 수 있는 키 또는 키와 관련된 정보를 제 3자에게 위탁시키고 일정한 조건하에 위탁된 키나 정보를 권한 있는 사람에게 전송하는 것  
키 저장 : 미래에 사용하거나 백업을 위해 생성된 키들을 안전하게 저장해 주는 서비스  
키 파생 : 비밀 근원 키를 이용하여 다른 새로운 세션키인 파생키를 생성하는 작업  
키 보관 : 일반적인 사용 후에 키를 안전하게 보관하기 위한 일련의 절차  
키 취소 : 키의 노출, 확인서 사용 간의 만료 등과 가은 경우 사용자의 키를 취소하는 절차를 제공  
키 말소 : 키와 사용자의 연결을 단절시켜주는 서비스  
키 폐기 : 더 이상 사용될 필요가 없는 키들을 안전하게 폐기하기 위한 일련의 절차를 제공  


키 설정 (Key Establishment)  
암호 방식을 구현하기 위하여 둘 또는 더 많은 사용자나 또는 모듈 안에서 안전하게 비밀정보가 만들어지는 과정  

키 공유(Key Agreement)  
둘 또는 더 많은 사용자가 공개된 통신로를 통하여 공동으로 비밀키를 설정하는 기술  
어떤 한 쪽에서 독립적으로 비밀정보를 미리 결정하지 않음  
ex) Diffie-Hellman 키 공유 프로토콜  

키 전송(Key Transport)  
한 사용자 또는 기관이 비밀키를 설정하여 다른 사용자에게 안전하게 키를 전달하는 기술  
ex) KEM(Key Encapsulation Mechanism)  

키 유도(Key Derivation Function)  
비밀정보(마스터키,패스워드,키 공유)로 부터 각종 정보보호 알고리즘 실행을 위하여 필요로 하는 다양한 키들을 유도해내는 함수(매커니즘)  

키 분배 프로토콜  

키 사전 분배 (Key Pre-distribution)  
신뢰하는 키 관리기관이 사전에 임의의 두 사용자에게 비밀 경로를 통하여 임의의 키를 선택하여 전달하는 방법  
TA와 네트워크 상의 모든 사용자 사이에 안전한 통로가 필요함  
사용자가 많은 경우에 많은 키를 관리해야 하는 문제점을 가짐  
n명의 사용자가 있다면 각 사용자는 n-1가지 키를 관리해야 하며 TA는 총 n(n-1)/2가지 키를 관리하여야 하므로 매우 복자하며 관리 비용이 많이 지불됨  

중앙 집중식 키분배  
네트워크 사용자 쌍방 간에 비밀 통신을 원할 때마다 키 관리 기관인 키분배센터(KDC) 또는 TA(TTA)에 의하여 새로운 키(세션키)가 분배되는 방식  
대칭키 암호 방식에 기반 : Kerberos  
공개키 암호 방식에 기반 : Diffe-Hellman, STS, MTI, Girault 키 공유 프로토콜  

Kerberos 키 분배  (그리스 신화에서 지옥의 문을 지키는 머리가 셋달린 개를 의미함)  
대칭키 암호 방식에 기반을 둔 대표적인 중앙 집중식 키분배 방식으로 사용자와 키분배센터 (KDC 또는 TA)를 이용하는 방식  
MIT의 Project Athenam 팀에 의해 개발된 인증 및 키 분배 프로토콜  

난수(Random Number)  
주어진 구간에서 통계적으로 독립적이고 예측 불가능하며 편중되지 않은 수  
예측 불가능 : 이전 출력을 안다고 하여도 이후의 출력 값을 예측할 수 없어야 함  
독립적 : 이전 출력된 난수와 다음 출력될 난수에 영향을 미치지 않음  
편중되지 않음 : 특정한 수가 나타날 확률이 더 높지 않아야 함  

실난수(True Random Number)  
물리적 과정이나 자연에 의하여 생성되는 잡음원으로 부터 얻어지는 난수  
ex) thermal noise, white noise, 주사위, lotto...

의사난수 (PseUdo Random Number)  
난수와 구별할 수 있는 효율적인 알고리즘이 존재하지 않는 수로 주어진 초기값(seed)으로 부터 결정적 알고리즘을 통해 생성됨  
ex) 블록암호 이용한 난수발생기, Hash 함수를 이용한 난수 발생기, ANSI X9.17, FIPS 186-2  

난수발생기 - RNG (Random Number Generator)  
물리적 현상의 랜덤성을 이용하여 Non-deterministic source(Entropy Source) 사용하여 비트 수열 생성  
RNG 출력 수열은 보정을 통해서 랜덤 수열로 직접 사용하거나, PRNG(의사난수 발생기)의 입력으로 사용 가능  
비결정논적 난수발생기라고도 함  
Non-Deterministic Random Bit Generator, NRBG  
매우 높은 엔트로피를 갖는 방면 높은 엔트로피를 갖는 잡음을 얻기가 쉽지 않고 다양한 플랫폼에 적용하기 쉽지 않음

PRNG - Pseudo Random Number Generator  
seed라 불리는 입력을 사용하여 효율적으로 의사난수 생성  
Deterministic Random Bit Generator(DRBG) 또는 DRNG 라고도 함  
대표적으로 CTR_DRBG, Hash_DRBG, HMAC_DRBG, ANSI X9.17, FIPS 186-2 등이 있다.  
짧은 길이의 Seed 값을 입력하여 결정론적 알고리즘에 의사난수를 생성함  
상대적으로 엔트로피는 낮지만 결정론적 알고리즘이 안전하다면 충분한 안전성을 제공함  
PRBG의 안전성은 Seed 값에 의존함  
Seed 값으로 RNG의 출력 비트를 사용  

키 유도함수 (Key Derivation Function, KDF)  
비밀정보(마스터키,패스워드,키 공유)로부터 각종 정보보호 알고리즘 실행을 위하여 필요로 하는 다양한 키들을 유도해내는 매커니즘  
키 확장 기능을 제공하며, 단일키(마스터키 또는 유도 키)로 부터 여러 개의 키를 생성하는 것을 가능케 함  

비밀정보 + 공개된 정보 ==> 키 유도함수(KDF) ==> 여러 개의 키 생성  

키 유도함수 용도 및 특징  
자동화된 키 설정 방식, 또는 사전-공유된 키를 통해 설정된 키로부터 추가적인 키를 얻기 위해 사용  
직접적으로 마스터 키가 사용되길 원하지 않을 때 이용  
마스터키(또는 키유도키)와 외부 입력값을 통해 키 생성  
마스터키(또는 키유도키)는 비밀값, 외부 입력값은 공개값으로 설정  
용도에 따라 세션키, 인증키, 암호화키 등을 생성함  

키 유도함수의 분류  

해시 함수 기반 키 유도함수  

해시 함수를 이용하여 출력된 결과값을 연접하여 키를 유도함  
ISO-18033-2, IEEEP1363a[2], PKCS#1 v2.1[3], ANSI X9.42, NIST SP800-56A, IEEE 802.11i  
무선 LAN의 KDF  

블록암호 기반 키 유도함수  

핵심함수로 AES, SAFER+ 등이 사용됨  
무선환경의 ㅍ준 3GPP TR 35.909, IEEE 802.15.1  
유럽의 비동기식 제 3세대 무선통신, Bluetooth 유도함수에 사용  
운영모드에 따라 counter, feedback, double-pipeline iteration 모드로 분류 (NIST SP800-108)  

패스워드 기반 키 유도함수  

패스워드(P), Salt(S), 반복횟수(C)를 이용하여 키를 유도함  
PKCS#5, NIST SP800-132  

일방향 함수 (One-way Function)  
변수를 통해 함수 값을 구하는 연산은 쉽지만 함수값으로부터 변수 값을 구하는 것은 매우 어려운 함수  
ex) 해시함수, 이산대수문제, 인수분해문제  
공개키 암호에 있어서 핵심적인 개념  
그 자체가 프로토콜은 아니지만 대부분의 보안 프로토콜에서 사용됨 (전자서명의 기초가 됨)  

충돌(Collision)  
서로 다른 입력 값에 대하여 동일한 해시 값이 출력되는 경우  
충돌쌍(collision-pair)  
충돌이 일어나도록 하는 메시지들의 쌍  
일방향 함수는 충돌쌍을 찾기가 어려워야 암호학적으로 유용함  

해시 함수 (Hash Function)  
임의의 유한 길이의 입력 값을 ㅂ다아 고정된 크기의 출력 값으로 바꾸는 함수  
대표적 Hash 함수 : MD5, SHA1, HAS160, SHA2, SHA3

암호학적 Hash 함수의 성질  
계산 용이성(Ease of Computation) : Hash 함수 h의 해시값 h(x)는 계산하기 쉬움  
일방향성(one-wayness) : 주어진 임의의 출력값 y에 대해, y=h(x)을 만족하는 입력값 x을 찾는 것이 계산적으로 불가능함. - Preimage Resistance(역상저항성)  
약한 충돌 저항성 (Waeak Collision Resistance) : 주어진 x에 대해 h(x)=h(y),x≠y을 만족하는 다른 입력값 y을 찾는 것이 계산적으로 불가능함 - 두 번째 역상 저항성  
강한 충돌 저항성 (Strong Collision Resistance) : h(x)=h(y)을 만족하는 임의의 두 입력값 x,y을 찾는것은 계산적으로 불가능함  

암호학적 Hash 함수의 용도  

전자서명에서 사용  
전자서명 시 전체 메시지 대신에 그 메시지를 대표하는 짧은 길이의 해시값에 서명하므로 효율성을 제공하고 동일한 서명효과를 얻기 위해 사용됨  

메시지의 무결성을 제공함  
메시지에 해시값을 함께 보관하면 그 메시지가 변경되지 않고 무결성을 유지한다는 것을 동일한 해시값을 갖는 지 비교하여 확인할 수 있음  
무결성을 제공하기 위해서는 강한 충돌 저항성을 갖는 해쉬함수이어야 함  

패스워드를 안전하게 저장하고 유지하기 위해 사용함  
유닉스시스템에서 패스워드를 평문으로 관리하지 않고 대신에 그것의 해시값을 유지함  
사용자가 패스워드를 입력하면 그것의 해시값을 계산하여 유지하고 있는해시값과 비교하여 올바른 패스워드가 입력 되었는지 검사합  
passwd 파일에 대한 접근 권한을 획득하더라도 해시값의 일방향성 특성때문에 계정의 패스워드를 알 수 없음  

공개키 암호시스템에서 사용됨  
RSA-OAEP(Optimal Asymmetric Encryption Padding)  

의사난수가 필요한 암호기술에 사용됨  
의사난수, 키 유도함수 에서 사용됨  

Message authentication code(MAC)에 사용됨  
HMAC  

스팸 메일을 막는데 사용됨  
e메일을 보내는 송신자에게 상당한 "노력"을 했다는 증거를 확인하기 전까지 e-메일 수신을 거부토록 하여 스팸메일을 막도록 함  

블록체인 등에서 원장의 무결성을 유지하는 사용함  

비트코인과 같은 암호화폐에서 채굴 하는데 사용됨  

키가 없는 해시함수  

블록 암호를 기초로 한 해시함수  

전용 해시 함수  
Hash 만을 ㅁ고적으로 최적화된 수행을 하도록 디자인된 해시함수임  

모듈 연산을 기초로 한 해시 함수  
압축 함수의 기반을 모듈 연산의 반복적인 수행에 두고 있는 해시 함수 임  

조정탐지 코드  
키가 없는 해시함수로 메시지 무결성 제공  

키가 있는 해시함수  

메시지 인증코드(MAC - Message Authentication Code)  
임의 길이의 메시지를 암호화 비밀키를 사용하여 고정된 출력값을 얻는 Hash 함수임  
일반적인 메시지 인증절차는 MAC에 의한 출력인 메시지인증코드라는 해시함수의 특별한 형태로서 다른 기술에 의해 메시지를 인증함  
송신자와 수신자가 사전에 비밀키를 공유해야 함  
메시지의 무결성과 인증을 동시에 수행함  
입력값으로 메시지와 키를 받는 키가 있는 해시함수   
대표적으로 CBC-MAC 과 HMAC이 있음  

CBC-MAC  
블록 암호에 기반을 둔 가장 널리 사용되는 메시지 인증 알고리즘  

HMAC  
Hash 함수를 기반으로 한 MAC 로 Bellare, Canetti, Krawczyk 가 제안함  


인증기술  

인증(Authentication) : 특정 시스템 또는 사용자의 신원을 증명하는 과정  

인증시스템 : 인증을 하고자 하는 주체에 대해 식별을 수행하고 이에 대한 인증 서비스를 부여하는 시스템  

사용자 인증기술  
정당한 사용자를 확인하는 과정  
패스워드 기반 : 사용자의 신원정보와 함께 패스워드를 사용하여 서버에 저장된 값과 일치 여부를 판단하여 인증하는 방법  
시도-응답 : 자기 자신만이 소유하고 있는 어떤 비밀 정보를 자신이 알고 있다는 사실을 간접적으로 보여주는 포로토콜  
영지식(Zero-Knowledge) : 비밀정보를 실제로 알고 있다는 사실만을 상대방이나 서버에 확신시켜주는 방법  

메시지 인증기술  
송신자가 전송한 내용이 수신자에게 정보의 변경없이 전송되엇는지를 상호 확인하는 ㅂ과정  
MAC : 메시지 데이터와 무결성을 동시에 보는 것  
MDC : 충돌성과 강한 충돌성을 동시에 만족하는 메시지의 대표적인 해시값을 제공하는 것 (조정탐지코드)  
전자서명 : 문서 인증도구인 도장(인감도장)이나 수기 섬여등과 같은 효력을 갖도록 디지털 정보로 구현한 것  

일회용 패스워드 기법  
OTP 생성방식  
동기화 방식  OTP 토큰과 OTP 인증 서버 사이에 동기화 되는 기준값에 따라 OTP 값이 생성됨  
시간 동기화, 이벤트 동기화, 시간-이벤트 조합 방식이 있음  

Challenge-Response 기법  
자기 자신만이 소유하고 있는 어떤 비밀 정보를 자신이 알고 있다는 사실을 간접적으로 보여주는 프로토콜을 사용하여 인증하는 기법  
신분 증명을 요청하는 서버가 신분을 밝히라는 시도를 클라이언트에 보내면 클라이언트는 그 비밀 정보를 이용하여 적당하게 응답함으로써 서버에게 자신을 증명하여 인증하는 방법  

전자서명  
종래이 인감도장 또는 서명 처럼 개인의 고유성을 주장하고 인정 받기 위해 전자적 문서에 서명하는 방법  
전자문서에 첨부되거나 논리적으로 결합되어 서명자를 확인하고 당해 전자문서의 내용에 대한 서명자의 승인을 나타내는데 이용될 수 잇는 전자적인 형태의 정보  

전자서명 특성  
위조불가 : 서명은 서명자 이외의 다른 사람이 생성할 수 없어야 함  
서명자인증 : 서명은 서명자의 의도에 따라 서명 된 것임을 확인할 수 있어야 함  
부인방지 : 서명자가 자신이 서명한 사실을 부인할 수 없어야 함  
변경 불가 : 서명한 문서의 내용을 변경할 수 없어야 함  
재사용 불가 : 하나의 문서의 서명을 다른 문서의 서명으로 사용할 수 없어야 함  